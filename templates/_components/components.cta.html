{#
  CTA
  ================
#}

{#
  {% include '_components/components.cta.html' with { options: { handle: '' } } %}
#}

{# -- Set Defaults -- #}
{% set defaults = {
  handle: ''
} %}

{% if options is defined %}
  {% set options = options is defined ? defaults|merge(options) : defaults %}
{% else %}
  {% set options = defaults %}
{% endif %}

{# -- Module -- #}
{% set doormat = entry.doormat.all() %}
{% for block in doormat %}
<div class="c-row c-row--md c-row--cta u-z-delta">
  {% for item in block.media.all() %}
  {% switch item.type %}
  {% case "photo" %}
  {% for type in item.photo.all() %}
    <div class="c-background-image" style="background-image: url('{{ type.url }}');"></div>
    <p class="c-background-video__meta">
      {{ type.credits }}
    </p>
  {% endfor %}
  {% case "video" %}
  {% for type in item.placeholder.all() %}
  <div class="c-background-image c-background-image--fallback" style="background-image: url('{{ type.url }}');"></div>
  {% endfor %}
  <video class="c-background-video" autoplay loop muted preload="true">
    {% for type in item.webm.all() %}
    <source src="{{ type.url }}" type="video/webm">
    {% endfor %}
    {% for type in item.mp4.all() %}
    <source src="{{ type.url }}" type="video/mp4">
    {% endfor %}
  </video>
  {% for type in item.placeholder.all() %}
  <p class="c-background-video__meta">
    {{ type.credits }}
  </p>
  {% endfor %}
  {% endswitch %}
  {% endfor %}
  <div class="o-container">
    <div class="o-grid o-grid--gutter o-flex">
      <div class="o-grid__item u-1-of-2-bp6">
        <div class="u-max-width-md">
          <div class="c-cta-lead u-color-neutral-xxxxx-light">
            {{ block.paragraph }}
          </div>
          {% for item in block.button.all() %}
          <p>
          {% if item.buttonLink | length %}
            {% for link in item.buttonLink.all() %}
            <a href="{{ link.url() }}" class="c-button c-button--lg c-button--cta">
              {{ item.buttonTitle }}
            </a>
            {% endfor %}
          {% else %}
            <a href="{{ item.buttonURL }}" class="c-button c-button--lg c-button--cta">
              {{ item.buttonTitle }}
            </a>
          {% endif %}
          </p>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endfor %}
