{#
  Agenda (Filter)
  ================
#}

{#
  {% include '_components/components.agenda-filter.html' with { options: { tag: '' } } %}
#}

{# -- Set Defaults -- #}
{% set defaults = {
  tag: ''
} %}

{% if options is defined %}
  {% set options = options is defined ? defaults|merge(options) : defaults %}
{% else %}
  {% set options = defaults %}
{% endif %}

{# -- Module -- #}
{% set pageEntries = craft.entries.section('agendaDetail').orderBy('date asc') %}

{% for entry in pageEntries.all() %}
{% for item in entry.tags.all() %}
{% set currentTags = item %}


{% if entry.date|date('Ymd') >= now|date('Ymd') %}
{% if currentTags == options.tag %}
<article class="u-divider-small">
  <p class="c-faded u-margin-bottom-small">
    {{ entry.date |date('l d F Y') }}
  </p>
  <div class="c-content c-content--small">
    <h2 class="c-h3">
      <a href="{{ entry.eventURL }}">
        {{ entry.title }}
      </a>
    </h2>
    {% for block in entry.body.all() %}
    {% switch block.type %}
    {% case "lead" %}
    {{ block.lead }}
    {% endswitch %}
    {% endfor %}
    <p>
      <a href="{{ entry.eventURL }}">Meer info</a>
    </p>
  </div>
</article>
{% endif %}
{% endif %}
{% endfor %}
{% endfor %}
