{# {% include '_components/components.content-form' %} #}

<div class="o-row-large s-theme-secondary">
  <div class="o-wrapper">
    <div class="s-editor">
      <h2>{{ block.heading }}</h2>
      {% if block.paragraph | length() %}
      {{ block.paragraph }}
      {% endif %}
    </div>
    {% if block.form | length() %}
      {% macro errorList(errors) %}
      {% if errors %}
        <ul class="errors">
            {% for error in errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
      {% endif %}
      {% endmacro %}
      {% from _self import errorList %}

      {% set pageRedirect = entry.url() %}
      {% if block.formRedirect | length() %}
      {% for page in block.formRedirect.all() %}
      {% set pageRedirect = page.uri %}
      {% endfor %}
      {% set form = wheelform.form({
        id: 1,
        redirect: pageRedirect,
        attributes: {
          'class': 'c-form',
        }
      }) %}
      {% else %}
      {% set form = wheelform.form({
        id: 1,
        redirect: pageRedirect,
      }) %}
      {% endif %}

      {{ form.open() }}
          {{ wheelformErrors['form'] is defined ? errorList(wheelformErrors['form']) }}
          {{ wheelformErrors['recaptcha'] is defined ? errorList(wheelformErrors['recaptcha']) }}
          {{ wheelformErrors['honeypot'] is defined ? errorList(wheelformErrors['honeypot']) }}

          {% for field in form.fields %}
              {% switch field.type %}
                  {% case "checkbox" %}
                  <ul class="c-field c-field--checkbox">
                    {% for item in field.items %}
                    <li>
                      <label><input class="checkbox" type="checkbox" value="{{ item }}" {{values[field.name] is defined and item in values[field.name] ? ' checked="checked"' : '' }} name="{{field.name}}[]" id=""/>{{item}}</label>
                    </li>
                    {% endfor %}
                  </ul>
                  {% case "radio" %}
                  <ul class="c-field c-field--radio">
                    {% for item in field.items %}
                    <li>
                      <input class="radio" type="radio" value="{{ item }}" {{values[field.name] is defined and item == values[field.name] ? ' checked="checked"' : '' }} name="{{field.name}}" id=""/>
                      <label>{{item}}</label>
                    </li>
                    {% endfor %}
                  </ul>
                  {% case "select" %}
                  <p class="c-field">
                    <select id="wf-select" name="{{field.name}}" class="wf-field {{field.fieldClass}}">
                    {% for item in field.items %}
                        <option value="{{ item }}" {{values[field.name] is defined and item == values[field.name] ? 'selected="selected"' : '' }}>{{item}}</option>
                    {% endfor %}
                    </select>
                  </p>
                  {% case "file" %}
                  <p class="c-field">
                    <label class="c-label">{{field.label}}</label>
                    <input type="file" name="{{field.name}}" id="" class="c-input"/>
                  </p>
                  {% case "textarea" %}
                  <p class="c-field">
                    <label class="c-label">{{field.label}}</label>
                    <textarea name="{{field.name}}" id="" class="c-textarea">{{ values[field.name] ?? '' }}</textarea>
                  </p>
                  {% case "list" %}
                  <p class="c-field">
                    <label class="c-label">{{field.label}}</label>
                    <input type="text" name="{{field.name}}[]" id="" class="c-input"/>
                    <script>//Javascript to handle adding fields</script>
                  </p>
                  {% default %}
                  <p class="c-field">
                    <label class="c-label">{{field.label}}</label>
                    <input type="{{field.type}}" value="{{ values[field.name] ?? '' }}" name="{{field.name}}" id="" class="c-input"/>
                  </p>
              {% endswitch %}
              {{ wheelformErrors[field.name] is defined ? errorList(wheelformErrors[field.name]) }}
          {% endfor %}
          {% if form.recaptcha %}
            <div>
              <script src="https://www.google.com/recaptcha/api.js"></script>
              <!-- Production captcha -->
              <div class="g-recaptcha" data-sitekey="{{wheelform.getSettings('recaptcha_public')}}"></div>
            </div>
          {% endif %}

        {% if block.buttonText | length() %}
        <p class="c-field">
          <button class="c-btn c-btn--secondary c-btn--large" id="submit">{{ block.buttonText }}</button>
        </p>
        {% else %}
        <p class="c-field">
          <button class="c-btn c-btn--secondary c-btn--large" id="submit">Verstuur</button>
        </p>
        {% endif %}
      </form>
    {% endif %}
  </div>
</div>

